<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0f1724;
  --card:#111827;
  --muted:#9ca3af;
  --accent:#7dd3fc;
  --primary:#3b82f6;
  --success:#10b981;
  --danger:#fb7185;
  --glass:rgba(255,255,255,0.04);
  --radius:16px;
}
html,body{height:100%}
body{
  font-family:"Vazirmatn",sans-serif;
  background:linear-gradient(180deg,var(--bg),#071025 120%);
  color:#f8fafc;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.container{
  width:100%;
  max-width:480px;
  background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);
  border-radius:22px;
  padding:22px;
  box-shadow:0 12px 40px rgba(2,6,23,0.7);
  border:1px solid rgba(255,255,255,0.03);
  position:relative;
  overflow:hidden;
  transition:transform .25s ease;
}
.header{
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  margin-bottom:10px;
}
.title{
  display:flex;
  align-items:center;
  gap:10px;
}
.logo{
  width:48px;height:48px;border-radius:12px;
  background:linear-gradient(135deg,var(--primary),#60a5fa);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 6px 18px rgba(59,130,246,0.18);
}
.logo svg{filter:drop-shadow(0 6px 12px rgba(0,0,0,0.35))}
h1{font-size:20px;color:var(--accent);letter-spacing:0.2px}
.controls{display:flex;gap:8px;align-items:center}
.icon-btn{
  background:var(--glass);
  border:1px solid rgba(255,255,255,0.04);
  padding:8px;border-radius:10px;cursor:pointer;color:var(--muted);
  display:inline-flex;align-items:center;justify-content:center;
  transition:all .18s ease;
}
.icon-btn:hover{transform:translateY(-3px);color:var(--accent)}
.instructions{color:var(--muted);margin:14px 0 20px;line-height:1.5}
.game-card{display:flex;flex-direction:column;gap:14px;padding-bottom:12px;}
.input-row{display:flex;gap:10px;align-items:center}
#guess-input{
  flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);
  background:#0b1220;color:#eef2ff;text-align:center;font-size:16px;
  outline:none;transition:box-shadow .18s ease,border-color .18s ease;
}
#guess-input:focus{box-shadow:0 6px 18px rgba(125,211,252,0.12);border-color:var(--accent)}
.btn{
  padding:12px 16px;border-radius:12px;border:none;font-weight:700;
  cursor:pointer;color:white;background:var(--primary);transition:all .15s ease;
}
.btn:hover{transform:translateY(-3px)}
.btn.secondary{background:linear-gradient(90deg,#0ea5a4,#06b6d4)}
.btn.full{width:100%}
.feedback{min-height:26px;font-size:16px;font-weight:700}
.f-high{color:#fca5a5}
.f-low{color:#fde68a;color:#fbbf24}
.f-win{color:#86efac}
.counter{color:var(--muted);font-size:13px;text-align:center}
.new-game{background:linear-gradient(90deg,var(--success),#34d399);border-radius:12px;padding:12px 14px;border:none;color:#032;cursor:pointer;transition:all .15s ease}
.new-game.hidden{display:none}
.range-pill{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);font-weight:600;color:var(--muted)}
.settings-panel{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:40;visibility:hidden;opacity:0;transition:opacity .18s ease;
}
.settings-panel.open{visibility:visible;opacity:1}
.settings-card{
  width:100%;max-width:420px;background:linear-gradient(180deg,#071233, rgba(255,255,255,0.02));padding:18px;border-radius:16px;border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 18px 60px rgba(2,6,23,0.7);
}
.settings-card h3{color:var(--accent);margin-bottom:8px;font-size:18px}
.form-row{display:flex;gap:10px;margin:12px 0}
.form-row input{
  flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:#071025;color:#eef2ff;text-align:center
}
.note{color:var(--muted);font-size:13px;margin-top:6px}
.row-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
.err{color:var(--danger);font-weight:700;font-size:14px;margin-top:8px;text-align:center}
@media (max-width:420px){
  .container{padding:18px;border-radius:18px}
  h1{font-size:18px}
  .logo{width:44px;height:44px}
  #guess-input{padding:10px;font-size:15px}
  .btn{padding:10px 12px;font-size:15px}
}
</style>
</head>
<body>
<div class="container" id="main">
  <div class="header">
    <div class="title">
      <div class="logo">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 12a9 9 0 1018 0 9 9 0 00-18 0z" fill="rgba(255,255,255,0.12)"/>
          <path d="M8 12h8M12 8v8" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"/>
        </svg>
      </div>
      <h1>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</h1>
    </div>
    <div class="controls">
      <div class="range-pill" id="current-range">Ø¨Ø§Ø²Ù‡: 1 â€” 100</div>
      <button class="icon-btn" id="open-settings" aria-label="ØªÙ†Ø¸ÛŒÙ…Ø§Øª">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 15.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 11-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V20a2 2 0 11-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06A2 2 0 112.3 16.9l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H4a2 2 0 110-4h.09c.7 0 1.32-.36 1.51-1a1.65 1.65 0 00-.33-1.82l-.06-.06A2 2 0 116.1 2.3l.06.06c.5.5 1.2.7 1.82.33.7-.4 1.51-.4 2.21 0 .62.37 1.32.2 1.82-.33l.06-.06A2 2 0 1117.7 7.1l-.06.06c-.4.7-.4 1.51 0 2.21.37.62.2 1.32-.33 1.82-.5.5-.7 1.2-.33 1.82z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
  </div>

  <p class="instructions" id="instructions">ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± ØªØ¹ÛŒÛŒÙ†â€ŒØ´Ø¯Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù† Ùˆ Ø³Ø¹ÛŒ Ú©Ù† Ø¢Ù† Ø±Ø§ Ø­Ø¯Ø³ Ø¨Ø²Ù†ÛŒ.</p>

  <div class="game-card">
    <div class="input-row">
      <input id="guess-input" type="number" placeholder="Ø­Ø¯Ø³Øª Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†">
      <button class="btn" id="guess-button">Ø­Ø¯Ø³ Ø¨Ø²Ù†</button>
    </div>

    <div class="feedback" id="feedback"></div>
    <div class="counter" id="guess-count">ØªØ¹Ø¯Ø§Ø¯ Ø­Ø¯Ø³â€ŒÙ‡Ø§: 0</div>
    <button id="new-game-button" class="new-game hidden">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
  </div>
</div>

<div class="settings-panel" id="settings">
  <div class="settings-card" role="dialog" aria-modal="true" aria-labelledby="settings-title">
    <h3 id="settings-title">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ</h3>
    <div class="form-row">
      <input id="min-input" type="number" placeholder="Ø­Ø¯Ø§Ù‚Ù„ (Ù…Ø«Ù„Ø§Ù‹ 1)">
      <input id="max-input" type="number" placeholder="Ø­Ø¯Ø§Ú©Ø«Ø± (Ù…Ø«Ù„Ø§Ù‹ 100)">
    </div>
    <div class="note">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø¹Ø¯Ø§Ø¯ ØµØ­ÛŒØ­ Ùˆ Ú©ÙˆÚ†Ú©ØªØ± Ø§Ø² 1,000,000 Ø¨Ø§Ø´Ø¯ Ùˆ Ø­Ø¯Ø§Ù‚Ù„ Ú©Ù…ØªØ± Ø§Ø² Ø­Ø¯Ø§Ú©Ø«Ø± Ø¨Ø§Ø´Ø¯.</div>
    <div class="err" id="settings-error" style="display:none"></div>
    <div class="row-actions">
      <button class="btn secondary" id="settings-cancel">Ø§Ù†ØµØ±Ø§Ù</button>
      <button class="btn" id="settings-apply">Ø§Ø¹Ù…Ø§Ù„ Ùˆ Ø´Ø±ÙˆØ¹</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<script>
let minVal=1,maxVal=100,secretNumber=0,guesses=0;
const guessInput=document.getElementById('guess-input');
const guessButton=document.getElementById('guess-button');
const feedback=document.getElementById('feedback');
const guessCountEl=document.getElementById('guess-count');
const newGameButton=document.getElementById('new-game-button');
const currentRange=document.getElementById('current-range');
const instructions=document.getElementById('instructions');
const settings=document.getElementById('settings');
const openSettings=document.getElementById('open-settings');
const settingsApply=document.getElementById('settings-apply');
const settingsCancel=document.getElementById('settings-cancel');
const minInput=document.getElementById('min-input');
const maxInput=document.getElementById('max-input');
const settingsError=document.getElementById('settings-error');

function updateRangeLabel(){
  currentRange.textContent=`Ø¨Ø§Ø²Ù‡: ${minVal} â€” ${maxVal}`;
  instructions.textContent=`ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† ${minVal} ØªØ§ ${maxVal} Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯Ù…. Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø­Ø¯Ø³Ø´ Ø¨Ø²Ù†ÛŒØŸ`;
  guessInput.placeholder=`Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† ${minVal} Ùˆ ${maxVal} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†`;
  guessInput.min=minVal;guessInput.max=maxVal;
}

function newGame(){
  secretNumber=Math.floor(Math.random()*(maxVal-minVal+1))+minVal;
  guesses=0;
  feedback.textContent='';
  feedback.className='feedback';
  guessCountEl.textContent='ØªØ¹Ø¯Ø§Ø¯ Ø­Ø¯Ø³â€ŒÙ‡Ø§: 0';
  guessInput.value='';
  guessInput.disabled=false;
  guessButton.disabled=false;
  newGameButton.classList.add('hidden');
  guessInput.focus();
}

function validateAndSetRange(a,b){
  if(!Number.isFinite(a)||!Number.isFinite(b))return'Ù„Ø·ÙØ§Ù‹ Ø§Ø¹Ø¯Ø§Ø¯ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†.';
  if(!Number.isInteger(a)||!Number.isInteger(b))return'Ù„Ø·ÙØ§Ù‹ Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­ ÙˆØ§Ø±Ø¯ Ú©Ù†.';
  if(a< -1000000 || b>1000000) return 'Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† -1,000,000 ØªØ§ 1,000,000 Ø¨Ø§Ø´Ø¯.';
  if(a>=b) return 'Ù…Ù‚Ø¯Ø§Ø± Ø­Ø¯Ø§Ù‚Ù„ Ø¨Ø§ÛŒØ¯ Ú©ÙˆÚ†Ú©ØªØ± Ø§Ø² Ø­Ø¯Ø§Ú©Ø«Ø± Ø¨Ø§Ø´Ø¯.';
  return '';
}

function checkGuess(){
  const v=Number(guessInput.value);
  if(!Number.isFinite(v) || !Number.isInteger(v) || v<minVal || v>maxVal){
    feedback.textContent=`Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­ Ø¨ÛŒÙ† ${minVal} ØªØ§ ${maxVal} ÙˆØ§Ø±Ø¯ Ú©Ù†.`;
    feedback.className='feedback f-high';
    return;
  }
  guesses++;
  guessCountEl.textContent=`ØªØ¹Ø¯Ø§Ø¯ Ø­Ø¯Ø³â€ŒÙ‡Ø§: ${guesses}`;
  if(v>secretNumber){
    feedback.textContent='Ø¨ÛŒØ§ Ù¾Ø§ÛŒÛŒÙ†! Ø¹Ø¯Ø¯Øª Ø¨Ø²Ø±Ú¯Ù‡.';
    feedback.className='feedback f-low';
  }else if(v<secretNumber){
    feedback.textContent='Ø¨Ø±Ùˆ Ø¨Ø§Ù„Ø§! Ø¹Ø¯Ø¯Øª Ú©ÙˆÚ†ÛŒÚ©Ù‡.';
    feedback.className='feedback f-high';
  }else{
    feedback.textContent=`ğŸ‰ Ø¢ÙØ±ÛŒÙ†! Ø¯Ø± ${guesses} Ø­Ø¯Ø³ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒ! ğŸ‰`;
    feedback.className='feedback f-win';
    guessInput.disabled=true;guessButton.disabled=true;
    newGameButton.classList.remove('hidden');
    launchConfetti();
  }
  guessInput.value='';guessInput.focus();
}

function launchConfetti(){
  const duration=2000;
  const end=Date.now()+duration;
  const defaults={startVelocity:35,spread:360,ticks:80,zIndex:9999};
  const iv=setInterval(function(){
    const timeLeft=end-Date.now();
    if(timeLeft<=0){clearInterval(iv);return}
    const particleCount=50*(timeLeft/duration);
    confetti(Object.assign({},defaults,{particleCount,origin:{x:Math.random()*0.3+0.1,y:Math.random()*0.2}}));
    confetti(Object.assign({},defaults,{particleCount,origin:{x:Math.random()*0.3+0.65,y:Math.random()*0.2}}));
  },250);
}

guessButton.addEventListener('click',checkGuess);
guessInput.addEventListener('keyup',e=>{if(e.key==='Enter'&&!guessButton.disabled)checkGuess()});
newGameButton.addEventListener('click',newGame);

openSettings.addEventListener('click',()=>{
  minInput.value=minVal;
  maxInput.value=maxVal;
  settingsError.style.display='none';
  settings.classList.add('open');
});

settingsCancel.addEventListener('click',()=>{settings.classList.remove('open')});
settingsApply.addEventListener('click',()=>{
  const a=Number(minInput.value), b=Number(maxInput.value);
  const err=validateAndSetRange(a,b);
  if(err){settingsError.style.display='block';settingsError.textContent=err;return}
  minVal=a;maxVal=b;updateRangeLabel();settings.classList.remove('open');newGame();
});

document.addEventListener('keydown',e=>{if(e.key==='Escape')settings.classList.remove('open')});

updateRangeLabel();
newGame();
</script>
</body>
</html>
